<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Ordina pizza italiana deliziosa online per consegna o asporto da Pizzeria da Davide">
  <title>Ordina a Domicilio - Pizzeria da Davide</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Dancing+Script:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    :root {
      --warm-red: #DC2626;
      --warm-red-dark: #B91C1C;
      --dark-bg: #0F172A;
      --dark-surface: #1E293B;
      --dark-surface-light: #334155;
      --text-primary: #F8FAFC;
      --text-secondary: #CBD5E1;
      --accent-gold: #F59E0B;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--dark-bg);
      color: var(--text-primary);
    }
    
    .font-display {
      font-family: 'Dancing Script', cursive;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .animate-pulse-cart {
      animation: pulse 0.3s ease-in-out;
    }
    
    @media (min-width: 1024px) {
      .sticky-cart {
        position: sticky;
        top: 100px;
        max-height: calc(100vh - 120px);
        overflow-y: auto;
      }
    }
    
    .sticky-cart::-webkit-scrollbar {
      width: 8px;
    }
    
    .sticky-cart::-webkit-scrollbar-track {
      background: var(--dark-surface);
      border-radius: 4px;
    }
    
    .sticky-cart::-webkit-scrollbar-thumb {
      background: var(--warm-red);
      border-radius: 4px;
    }

    input, textarea {
      background-color: var(--dark-surface-light) !important;
      border-color: #475569 !important;
      color: var(--text-primary) !important;
    }
    
    input::placeholder, textarea::placeholder {
      color: #64748B !important;
    }
  </style>
  
  <meta name="theme-color" content="#DC2626">
</head>
<body>
  
  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50" style="background-color: var(--dark-surface); box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-20">
        <a href="index.html" class="flex items-center space-x-2">
          <i class="fas fa-utensils text-3xl" style="color: var(--warm-red);"></i>
          <div>
            <div class="font-display text-2xl font-bold" style="color: var(--warm-red);">Davide's</div>
            <div class="text-xs" style="color: var(--text-secondary);">Autentica Pizzeria</div>
          </div>
        </a>
        
        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-8">
          <a href="index.html" class="hover:text-red-500 transition-colors font-medium" style="color: var(--text-secondary);">Home</a>
          <a href="ordina.html" class="text-base font-semibold" style="color: var(--warm-red);">Ordina a Domicilio</a>
          <a href="prenota.html" class="hover:text-red-500 transition-colors font-medium" style="color: var(--text-secondary);">Prenota Tavolo</a>
          <a href="index.html#contact" class="hover:text-red-500 transition-colors font-medium" style="color: var(--text-secondary);">Contatti</a>
        </div>
        
        <!-- Mobile menu button -->
        <button id="mobile-menu-btn" class="md:hidden text-2xl" style="color: var(--warm-red);">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
    
    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden mobile-menu md:hidden" style="background-color: var(--dark-surface); border-top: 1px solid var(--dark-surface-light);">
      <div class="container mx-auto px-4 py-4 space-y-4">
        <a href="index.html" class="block py-2" style="color: var(--text-secondary);">Home</a>
        <a href="ordina.html" class="block py-2 font-semibold" style="color: var(--warm-red);">Ordina a Domicilio</a>
        <a href="prenota.html" class="block py-2" style="color: var(--text-secondary);">Prenota Tavolo</a>
        <a href="index.html#contact" class="block py-2" style="color: var(--text-secondary);">Contatti</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="pt-24 pb-16" style="background-color: var(--dark-bg);">
    <div class="container mx-auto px-4">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="font-display text-4xl md:text-6xl font-bold mb-4 text-white">
          Ordina a Domicilio
        </h1>
        <p class="text-lg" style="color: var(--text-secondary);">
          Scegli i tuoi preferiti e ricevili a casa tua
        </p>
      </div>

      <div class="grid lg:grid-cols-3 gap-8">
        <!-- Menu Items -->
        <div class="lg:col-span-2">
          <!-- Pizzas Section -->
          <div class="mb-12">
            <div class="flex items-center mb-6">
              <i class="fas fa-pizza-slice text-3xl mr-3" style="color: var(--warm-red);"></i>
              <h2 class="text-3xl font-bold text-white">Pizze</h2>
            </div>
            <div id="menu-pizze" class="grid md:grid-cols-2 gap-6"></div>
          </div>

          <!-- Drinks Section -->
          <div class="mb-12">
            <div class="flex items-center mb-6">
              <i class="fas fa-wine-glass-alt text-3xl mr-3" style="color: var(--warm-red);"></i>
              <h2 class="text-3xl font-bold text-white">Bevande</h2>
            </div>
            <div id="menu-bevande" class="grid md:grid-cols-2 gap-6"></div>
          </div>

          <!-- Desserts Section -->
          <div class="mb-12">
            <div class="flex items-center mb-6">
              <i class="fas fa-birthday-cake text-3xl mr-3" style="color: var(--warm-red);"></i>
              <h2 class="text-3xl font-bold text-white">Dolci</h2>
            </div>
            <div id="menu-desserts" class="grid md:grid-cols-2 gap-6"></div>
          </div>
        </div>

        <!-- Order Cart -->
        <div class="lg:col-span-1">
          <div class="rounded-2xl shadow-2xl p-6 sticky-cart" style="background-color: var(--dark-surface-light);">
            <h2 class="text-2xl font-bold mb-6 text-center text-white">
              <i class="fas fa-shopping-cart mr-2"></i>Il Tuo Ordine
            </h2>
            
            <div id="cart-items" class="space-y-4 mb-6 min-h-[200px]">
              <div class="text-center py-8" style="color: var(--text-secondary);">
                <i class="fas fa-shopping-basket text-5xl mb-4 opacity-30"></i>
                <p>Il carrello è vuoto</p>
              </div>
            </div>

            <div class="border-t-2 pt-4 space-y-3" style="border-color: var(--dark-surface);">
              <div class="flex justify-between" style="color: var(--text-secondary);">
                <span class="font-semibold">Subtotale</span>
                <span id="cart-subtotal" class="font-bold">€0.00</span>
              </div>
              
              <div class="border-t pt-3" style="border-color: var(--dark-surface);">
                <label class="block font-semibold mb-2 text-white">Indirizzo di Consegna</label>
                <input type="text" id="delivery-address" placeholder="Inserisci il tuo indirizzo" class="w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-red-500 transition-colors">
                <p class="text-sm mt-2" style="color: var(--text-secondary);">
                  <i class="fas fa-info-circle mr-1"></i>Costo consegna: €2-€6 in base alla posizione
                </p>
              </div>
              
              <div class="flex justify-between text-lg font-bold pt-3" style="color: var(--warm-red);">
                <span>Totale</span>
                <span id="cart-total">€0.00</span>
              </div>
              
              <button id="checkout-btn" disabled class="w-full py-4 rounded-full font-semibold text-white transition-all mt-4 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100" style="background: linear-gradient(135deg, var(--warm-red) 0%, var(--warm-red-dark) 100%);">
                <i class="fas fa-lock mr-2"></i>Vai al Pagamento
              </button>
              
              <p class="text-xs text-center mt-4" style="color: var(--text-secondary);">
                <i class="fas fa-shield-alt mr-1"></i>Pagamento sicuro
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Checkout Modal -->
  <div id="checkout-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="max-w-md w-full p-8 max-h-[90vh] overflow-y-auto" style="background-color: var(--dark-surface-light); border-radius: 1rem;">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-white">Pagamento</h2>
        <button id="close-modal" class="text-3xl hover:text-red-500 transition-colors" style="color: var(--text-secondary);">&times;</button>
      </div>

      <!-- Delivery Info Form -->
      <div id="checkout-form" class="space-y-4">
        <div>
          <label class="block font-semibold mb-2 text-white">Nome Completo</label>
          <input type="text" id="checkout-name" required class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:border-red-500 transition-colors">
        </div>
        
        <div>
          <label class="block font-semibold mb-2 text-white">Numero di Telefono</label>
          <input type="tel" id="checkout-phone" required class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:border-red-500 transition-colors">
        </div>
        
        <div>
          <label class="block font-semibold mb-2 text-white">Indirizzo di Consegna</label>
          <input type="text" id="checkout-address" required class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:border-red-500 transition-colors">
        </div>

        <div class="border-t pt-4 mt-6" style="border-color: var(--dark-surface);">
          <div id="checkout-summary" class="space-y-2"></div>
          <div class="flex justify-between text-xl font-bold pt-4 border-t mt-4" style="color: var(--warm-red); border-color: var(--dark-surface);">
            <span>Totale</span>
            <span id="checkout-total">€0.00</span>
          </div>
        </div>
        
        <div id="checkout-message" class="hidden mt-4 p-4 rounded-lg text-center"></div>
        
        <button id="confirm-order" class="w-full py-4 rounded-full font-semibold text-white transition-all hover:shadow-lg transform hover:scale-105 mt-6" style="background: linear-gradient(135deg, var(--warm-red) 0%, var(--warm-red-dark) 100%);">
          <i class="fas fa-check-circle mr-2"></i>Conferma Ordine
        </button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="py-12" style="background-color: #000000;">
    <div class="container mx-auto px-4 text-center">
      <p style="color: var(--text-secondary);">&copy; 2024 Pizzeria da Davide. Tutti i diritti riservati.</p>
    </div>
  </footer>

  <!-- Scroll to Top -->
  <button id="scroll-to-top" class="fixed bottom-8 right-8 w-14 h-14 rounded-full flex items-center justify-center transition-all opacity-0 pointer-events-none z-40 shadow-lg text-white" style="background: var(--warm-red);">
    <i class="fas fa-arrow-up text-xl"></i>
  </button>

  <script>
    // Menu Data
    const menuData = {
      pizze: [
        { nome: "Margherita", ingredienti: "Pomodoro, Mozzarella, Basilico Fresco", prezzo: 7.00, id: "pizza1", immagine: "images/pizza-margherita.jpg" },
        { nome: "Diavola", ingredienti: "Pomodoro, Mozzarella, Salame Piccante", prezzo: 9.50, id: "pizza2", immagine: "images/pizza-diavola.jpg" },
        { nome: "Vegetariana", ingredienti: "Pomodoro, Mozzarella, Zucchine, Melanzane, Peperoni", prezzo: 10.00, id: "pizza3", immagine: "images/pizza-vegetariana.jpg" },
        { nome: "Quattro Formaggi", ingredienti: "Mozzarella, Gorgonzola, Scamorza, Parmigiano", prezzo: 11.00, id: "pizza4", immagine: "images/pizza-quattro-formaggi.jpg" },
        { nome: "Capricciosa", ingredienti: "Pomodoro, Mozzarella, Funghi, Prosciutto, Carciofi, Olive", prezzo: 11.50, id: "pizza5", immagine: "images/pizza-capricciosa.jpg" },
        { nome: "Marinara", ingredienti: "Pomodoro, Aglio, Origano (senza mozzarella)", prezzo: 6.50, id: "pizza6", immagine: "images/pizza-marinara.jpg" },
        { nome: "Napoli", ingredienti: "Pomodoro, Mozzarella, Acciughe, Capperi, Origano", prezzo: 9.00, id: "pizza7", immagine: "images/pizza-napoli.jpg" }
      ],
      bevande: [
        { nome: "Acqua Naturale 1L", ingredienti: "Acqua naturale minerale", prezzo: 2.00, id: "drink1" },
        { nome: "Coca Cola", ingredienti: "Lattina Coca Cola 33cl", prezzo: 3.50, id: "drink2" },
        { nome: "Fanta", ingredienti: "Lattina Fanta arancia 33cl", prezzo: 3.50, id: "drink3" },
        { nome: "Birra Artigianale", ingredienti: "Birra IPA locale 50cl", prezzo: 6.00, id: "drink4" },
        { nome: "Vino della Casa", ingredienti: "Caraffa vino rosso o bianco 1L", prezzo: 8.00, id: "drink5" },
        { nome: "Birra Moretti", ingredienti: "Bottiglia Moretti 66cl", prezzo: 5.00, id: "drink6" },
        { nome: "Vino Bianco Premium", ingredienti: "Bottiglia 75cl", prezzo: 18.00, id: "drink7" }
      ],
      desserts: [
        { nome: "Tiramisu", ingredienti: "Savoiardi imbevuti di caffè, crema al mascarpone", prezzo: 6.50, id: "dessert1", immagine: "images/tiramisu.jpg" },
        { nome: "Cannoli", ingredienti: "Gusci croccanti con ricotta dolce", prezzo: 6.00, id: "dessert2", immagine: "images/cannoli.jpg" },
        { nome: "Gelato", ingredienti: "3 palline di gelato italiano autentico", prezzo: 6.00, id: "dessert3", immagine: "images/gelato.jpg" },
        { nome: "Torta Lava al Cioccolato", ingredienti: "Torta calda con cuore al cioccolato", prezzo: 6.50, id: "dessert4", immagine: "images/torta.jpg" }
      ]
    };

    let cart = {};
    let allItems = [...menuData.pizze, ...menuData.bevande, ...menuData.desserts];

    // Render Menu Items
    function renderMenu(items, targetId) {
      const target = document.getElementById(targetId);
      let html = '';
      items.forEach(item => {
        const hasImage = item.immagine || '';
        const displayPrice = item.prezzo === Math.floor(item.prezzo) ? item.prezzo.toFixed(0) : item.prezzo.toFixed(2);
        html += `
          <div class="overflow-hidden rounded-xl shadow-lg transition-all hover:shadow-xl" style="background-color: var(--dark-surface-light);">
            ${hasImage ? `<img src="${item.immagine}" alt="${item.nome}" class="w-full h-40 object-cover">` : ''}
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-white">${item.nome}</h3>
              <p class="text-sm mb-4" style="color: var(--text-secondary);">${item.ingredienti}</p>
              <div class="flex items-center justify-between">
                <span class="text-2xl font-bold" style="color: var(--warm-red);">€${displayPrice}</span>
                <div class="flex items-center space-x-2">
                  <button onclick="changeQuantity('${item.id}', -1)" class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-white transition-all" style="background: var(--warm-red);">
                    <i class="fas fa-minus text-xs"></i>
                  </button>
                  <span id="qty-${item.id}" class="w-10 text-center font-semibold" style="color: var(--text-primary);">0</span>
                  <button onclick="changeQuantity('${item.id}', 1)" class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-white transition-all" style="background: var(--warm-red);">
                    <i class="fas fa-plus text-xs"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      });
      target.innerHTML = html;
    }

    // Change Quantity
    function changeQuantity(itemId, change) {
      const currentQty = cart[itemId] || 0;
      const newQty = Math.max(0, currentQty + change);
      
      if (newQty === 0) {
        delete cart[itemId];
      } else {
        cart[itemId] = newQty;
      }
      
      document.getElementById('qty-' + itemId).textContent = newQty;
      updateCart();
    }

    // Update Cart Display
    function updateCart() {
      const cartItems = document.getElementById('cart-items');
      const cartSubtotal = document.getElementById('cart-subtotal');
      const cartTotal = document.getElementById('cart-total');
      const checkoutBtn = document.getElementById('checkout-btn');
      
      let subtotal = 0;
      let html = '';
      
      for (const [itemId, quantity] of Object.entries(cart)) {
        const item = allItems.find(i => i.id === itemId);
        if (item) {
          const itemTotal = item.prezzo * quantity;
          subtotal += itemTotal;
          const displayPrice = itemTotal === Math.floor(itemTotal) ? itemTotal.toFixed(0) : itemTotal.toFixed(2);
          const displayUnit = item.prezzo === Math.floor(item.prezzo) ? item.prezzo.toFixed(0) : item.prezzo.toFixed(2);
          html += `
            <div class="flex items-center justify-between p-3 rounded-lg" style="background-color: var(--dark-surface);">
              <div class="flex-1">
                <div class="font-semibold text-white">${item.nome}</div>
                <div class="text-sm" style="color: var(--text-secondary);">Qtà: ${quantity} × €${displayUnit}</div>
              </div>
              <div class="text-right">
                <div class="font-bold" style="color: var(--warm-red);">€${displayPrice}</div>
                <button onclick="changeQuantity('${itemId}', -1)" class="text-red-500 text-sm mt-1 hover:text-red-600 transition-colors">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          `;
        }
      }
      
      if (html === '') {
        html = `
          <div class="text-center py-8" style="color: var(--text-secondary);">
            <i class="fas fa-shopping-basket text-5xl mb-4 opacity-30"></i>
            <p>Il carrello è vuoto</p>
          </div>
        `;
      }
      
      cartItems.innerHTML = html;
      const displaySubtotal = subtotal === Math.floor(subtotal) ? subtotal.toFixed(0) : subtotal.toFixed(2);
      cartSubtotal.textContent = '€' + displaySubtotal;
      
      // Calculate delivery fee
      const address = document.getElementById('delivery-address').value.toLowerCase();
      let deliveryFee = 0;
      if (subtotal > 0 && address.trim() !== '') {
        if (address.includes('diano marina')) {
          deliveryFee = 2.00;
        } else if (address.includes('imperia')) {
          deliveryFee: 4.00;
        } else {
          deliveryFee = 6.00;
        }
      }
      
      const total = subtotal + deliveryFee;
      const displayTotal = total === Math.floor(total) ? total.toFixed(0) : total.toFixed(2);
      cartTotal.textContent = '€' + displayTotal;
      
      checkoutBtn.disabled = Object.keys(cart).length === 0;
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      renderMenu(menuData.pizze, 'menu-pizze');
      renderMenu(menuData.bevande, 'menu-bevande');
      renderMenu(menuData.desserts, 'menu-desserts');
      
      document.getElementById('delivery-address').addEventListener('input', updateCart);
      
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      mobileMenuBtn.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
        const icon = this.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
      });
      
      document.getElementById('checkout-btn').addEventListener('click', function() {
        if (Object.keys(cart).length === 0) return;
        
        const modal = document.getElementById('checkout-modal');
        const summary = document.getElementById('checkout-summary');
        const total = document.getElementById('checkout-total');
        
        let html = '';
        let subtotal = 0;
        
        for (const [itemId, quantity] of Object.entries(cart)) {
          const item = allItems.find(i => i.id === itemId);
          if (item) {
            const itemTotal = item.prezzo * quantity;
            subtotal += itemTotal;
            const displayPrice = itemTotal === Math.floor(itemTotal) ? itemTotal.toFixed(0) : itemTotal.toFixed(2);
            html += `
              <div class="flex justify-between" style="color: var(--text-secondary);">
                <span>${item.nome} (×${quantity})</span>
                <span class="font-semibold">€${displayPrice}</span>
              </div>
            `;
          }
        }
        
        const address = document.getElementById('delivery-address').value.toLowerCase();
        let deliveryFee = 0;
        if (address.includes('diano marina')) {
          deliveryFee = 2.00;
        } else if (address.includes('imperia')) {
          deliveryFee = 4.00;
        } else {
          deliveryFee = 6.00;
        }
        
        const displayDeliveryFee = deliveryFee === Math.floor(deliveryFee) ? deliveryFee.toFixed(0) : deliveryFee.toFixed(2);
        html += `<div class="flex justify-between text-xl border-t pt-2 mt-2" style="border-color: var(--dark-surface); color: var(--text-secondary);"><span>Consegna</span><span class="font-semibold">€${displayDeliveryFee}</span></div>`;
        summary.innerHTML = html;
        const displayTotal = (subtotal + deliveryFee) === Math.floor(subtotal + deliveryFee) ? (subtotal + deliveryFee).toFixed(0) : (subtotal + deliveryFee).toFixed(2);
        total.textContent = '€' + displayTotal;
        
        document.getElementById('checkout-address').value = document.getElementById('delivery-address').value;
        
        modal.classList.remove('hidden');
      });
      
      document.getElementById('close-modal').addEventListener('click', function() {
        document.getElementById('checkout-modal').classList.add('hidden');
      });
      
      document.getElementById('confirm-order').addEventListener('click', function() {
        const form = document.getElementById('checkout-form');
        const message = document.getElementById('checkout-message');
        const name = document.getElementById('checkout-name').value;
        const phone = document.getElementById('checkout-phone').value;
        const address = document.getElementById('checkout-address').value;
        
        if (!name || !phone || !address) {
          message.classList.remove('hidden');
          message.classList.add('bg-red-900', 'border', 'border-red-700', 'text-red-300');
          message.textContent = 'Compila tutti i campi';
          return;
        }
        
        this.disabled = true;
        this.innerHTML = 'Elaborazione...';
        
        setTimeout(() => {
          message.classList.remove('hidden');
          message.classList.add('bg-green-900', 'border', 'border-green-700', 'text-green-300');
          message.textContent = 'Ordine confermato! Ti contatteremo presto.';
          
          setTimeout(() => {
            document.getElementById('checkout-modal').classList.add('hidden');
            form.reset();
            cart = {};
            document.querySelectorAll('[id^="qty-"]').forEach(el => el.textContent = '0');
            updateCart();
            
            this.disabled = false;
            this.innerHTML = '<i class="fas fa-check-circle mr-2"></i>Conferma Ordine';
          }, 2000);
        }, 1500);
      });
      
      const scrollTopBtn = document.getElementById('scroll-to-top');
      window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
          scrollTopBtn.classList.add('opacity-100');
          scrollTopBtn.classList.remove('pointer-events-none');
        } else {
          scrollTopBtn.classList.remove('opacity-100');
          scrollTopBtn.classList.add('pointer-events-none');
        }
      });
      
      scrollTopBtn.addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      
      updateCart();
    });
  </script>
</body>
</html>
